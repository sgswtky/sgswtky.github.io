<!DOCTYPE html>
<html lang="ja-jp">
    <head>
        

        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Jenkins Pipeline ã§Groovyã‚’æ›¸ã„ã¦ãŸã‚‰æœŸå¾…ã—ãªã„å‹•ãã‚’ã—ãŸ</title>
        <meta name="description" content="Jenkinsã‚’ä½¿ã£ã¦ãŸæ™‚ã®è©±ã€‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã¯ã¨ã¦ã‚‚å¤§åˆ‡ã€‚">
        
        <style>

    html body {
        font-family: 'Noto Sans JP', sans-serif;
        background-color: white;
    }

    :root {
        --accent: green;
        --border-width:  5px ;
    }

</style>


<link rel="stylesheet" href="https://sgswtky.github.io/css/main.css">


 <link rel="stylesheet" href="https://sgswtky.github.io/css/custom.css"> 


<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto%20Sans%20JP">


 <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"> 


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">


<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
 

    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/haskell.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/kotlin.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/scala.min.js"></script>
    
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/swift.min.js"></script>
    
    <script>hljs.initHighlightingOnLoad();</script>






<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>


<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>


<script>$(document).on('click', function() { $('.collapse').collapse('hide'); })</script>
 <meta name="generator" content="Hugo 0.80.0" />
        

        
            <script async src="https://www.googletagmanager.com/gtag/js?id=G-0TV1S0EXHL"></script>
            <script>
              window.dataLayer = window.dataLayer || [];
              function gtag(){dataLayer.push(arguments)};
              gtag('js', new Date());
              gtag('config', 'G-0TV1S0EXHL');
            </script>
        
        
            <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
        
        

    </head>

    <body>
        

        <nav class="navbar navbar-default navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <a class="navbar-brand visible-xs" href="#">Jenkins Pipeline ã§Groovyã‚’æ›¸ã„ã¦ãŸã‚‰æœŸå¾…ã—ãªã„å‹•ãã‚’ã—ãŸ</a>
                    <button class="navbar-toggle" data-target=".navbar-collapse" data-toggle="collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                </div>
                <div class="collapse navbar-collapse">
                    
                        <ul class="nav navbar-nav">
                            
                                <li><a href="/">Top</a></li>
                            
                                <li><a href="/profile/">Profile</a></li>
                            
                                <li><a href="/post/">Blog</a></li>
                            
                                <li><a href="https://twitter.com/sgswtky">Twitter</a></li>
                            
                                <li><a href="https://github.com/sgswtky">GitHub</a></li>
                            
                        </ul>
                    
                    
                </div>
            </div>
        </nav>


<main>

    <div>
        <h2>Jenkins Pipeline ã§Groovyã‚’æ›¸ã„ã¦ãŸã‚‰æœŸå¾…ã—ãªã„å‹•ãã‚’ã—ãŸ</h2>
        <h5>July 17, 2018</h5>
        
<a href="https://sgswtky.github.io/tags/jenkins"><kbd class="item-tag">Jenkins</kbd></a>

<a href="https://sgswtky.github.io/tags/pipeline"><kbd class="item-tag">Pipeline</kbd></a>


    </div>

    <div align="start" class="content"><p>å…ˆæ—¥ã‹ã‚‰å¤ã„ <code>Jenkins2</code> ã®ã‚¸ãƒ§ãƒ–ã‚’ãƒ¡ãƒ³ãƒ†ã™ã‚‹ä»•äº‹ã‚’ã—ã¦ã„ã¦ã€Pipelineã§ Groovyã‚’æ›¸ã„ã¦ãŸã‚‰ç‰¹å®šã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ã¯å‹•ãã‘ã©ãã‚Œä»¥å¤–ã ã¨å‹•ã‹ãªã„ã¨ã„ã†äº‹æƒ…ã«é­é‡ã—ãŸã€‚</p>
<p>ã‚„ã‚ŠãŸã‹ã£ãŸã“ã¨ã¯ã€ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³Aã‹ã‚‰ã€ã‚¸ãƒ§ãƒ–Aã‚’ä¸¦åˆ—ã§2ã¤èµ·å‹•ã•ã›ãŸã‹ã£ãŸã€‚
è‰²ã€…èª¿ã¹ãŸã‘ã©çµå±€ã‚ã‹ã‚‰ãªãã¦ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸã‚‰æ²»ã£ãŸè©±ã€‚</p>
<h2 id="å®Ÿéš›ã«ç™ºç”Ÿã—ãŸäº‹è±¡ã«ã¤ã„ã¦">å®Ÿéš›ã«ç™ºç”Ÿã—ãŸäº‹è±¡ã«ã¤ã„ã¦</h2>
<h3 id="è¨˜è¿°ã—ãŸã‘ã©å‹•ã‹ãªã‹ã£ãŸã‚³ãƒ¼ãƒ‰">è¨˜è¿°ã—ãŸã‘ã©å‹•ã‹ãªã‹ã£ãŸã‚³ãƒ¼ãƒ‰</h3>
<p>ã‚³ãƒ¼ãƒ‰ã¯æ¥µã€…å˜ç´”ã§ä»¥ä¸‹ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-pipeline.groovy" data-lang="pipeline.groovy">node<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;master&#34;</span><span style="color:#f92672">){</span>
  <span style="color:#66d9ef">def</span> tasks <span style="color:#f92672">=</span> <span style="color:#f92672">[:]</span>
  <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">2</span><span style="color:#f92672">;</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
    tasks<span style="color:#f92672">[</span>i<span style="color:#f92672">.</span><span style="color:#a6e22e">toString</span><span style="color:#f92672">()]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
        build job: <span style="color:#e6db74">&#34;Job_A&#34;</span>
      <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>
  parallel tasks
<span style="color:#f92672">}</span>
</code></pre></div><p>ã“ã®ã‚³ãƒ¼ãƒ‰ã‚’å®Ÿè¡Œã—ãŸã‚‰é€šå¸¸ã§ã‚ã‚Œã° ã‚¸ãƒ§ãƒ–A ãŒï¼’ã¤å®Ÿè¡Œã•ã‚Œã‚‹ã¯ãšã€‚ã—ã‹ã—ä»¥ä¸‹ã®ã‚ˆã†ã«1ã¤ã—ã‹ Job_AãŒå®Ÿè¡Œã•ã‚Œãªã‹ã£ãŸã€‚</p>
<pre><code class="language-jenkins.log" data-lang="jenkins.log">Started by timer
[Pipeline] node
Running on master in /var/lib/jenkins/workspace/Pipeline_A
[Pipeline] {
[Pipeline] parallel
[Pipeline] [0] { (Branch: 0)
[Pipeline] [1] { (Branch: 1)
[Pipeline] [0] stage
[Pipeline] [0] { (branch_2)
[Pipeline] [1] stage
[Pipeline] [1] { (branch_2)
[Pipeline] [0] build (Building Job_A)
[0] Scheduling project: Job_A
[Pipeline] [1] build (Building Job_A)
[1] Scheduling project: Job_A
[0] Starting building: Job_A #4
// â†‘ã“ã“ã§ Job_A ãŒ ãƒ“ãƒ«ãƒ‰ç•ªå·4ã§èµ·å‹•ã—ã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚‹ãŒã€èµ·å‹•ã—ã¦ã„ã‚‹ã®ã¯ #4 ã ã‘ã€‚
[Pipeline] [0] }
[Pipeline] [1] }
[Pipeline] [0] // stage
[Pipeline] [1] // stage
[Pipeline] [0] }
[Pipeline] [1] }
[Pipeline] // parallel
[Pipeline] }
[Pipeline] // node
[Pipeline] End of Pipeline
Finished: SUCCESS
</code></pre>
<div style="">
  <div style="">
      <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0695732937559315" crossorigin="anonymous"></script>
      <ins class="adsbygoogle"
       style="display:block; text-align:center;"
       data-ad-layout="in-article"
       data-ad-format="fluid"
       data-ad-client="ca-pub-0695732937559315"
       data-ad-slot="7896893399"></ins>
       <script>
         (adsbygoogle = window.adsbygoogle || []).push({});
       </script>
  </div>
</div>

<h3 id="ç†ç”±ã¯ã‚ã‹ã‚‰ãªã„ãŒä½•æ•…ã‹å‹•ãã‚³ãƒ¼ãƒ‰">ç†ç”±ã¯ã‚ã‹ã‚‰ãªã„ãŒä½•æ•…ã‹å‹•ãã‚³ãƒ¼ãƒ‰</h3>
<p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯æœŸå¾…ã™ã‚‹å‹•ãã‚’ã—ãŸã€‚</p>
<p>ã§ã‚‚ã‚µãƒ¼ãƒãƒ¼åã‚’æ¸¡ã—ã¦ã‚‹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å»ƒæ­¢ã—ãŸã‹ã£ãŸãŸã‚ã€ <code>params.size()</code> ã§ãªãã€æ™®é€šã« forã§å›æ•°åˆ†ãƒ«ãƒ¼ãƒ—ã™ã‚‹ã‚³ãƒ¼ãƒ‰ï¼ˆè¨˜äº‹ä¸Šéƒ¨ã®ã‚³ãƒ¼ãƒ‰ï¼‰ã«ã—ãŸã‹ã£ãŸãŒå‹•ã‹ãªã„ã€‚</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-pipeline.groovy" data-lang="pipeline.groovy">node<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;master&#34;</span><span style="color:#f92672">){</span>
  <span style="color:#66d9ef">def</span> params <span style="color:#f92672">=</span> <span style="color:#f92672">[</span><span style="color:#e6db74">&#34;server-01&#34;</span><span style="color:#f92672">,</span> <span style="color:#e6db74">&#34;server-02&#34;</span><span style="color:#f92672">]</span>
  <span style="color:#66d9ef">def</span> tasks <span style="color:#f92672">=</span> <span style="color:#f92672">[:]</span>

  <span style="color:#66d9ef">for</span> <span style="color:#f92672">(</span>i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span><span style="color:#f92672">;</span> i <span style="color:#f92672">&lt;</span> params<span style="color:#f92672">.</span><span style="color:#a6e22e">size</span><span style="color:#f92672">();</span> i<span style="color:#f92672">++)</span> <span style="color:#f92672">{</span>
    <span style="color:#66d9ef">def</span> param <span style="color:#f92672">=</span> params<span style="color:#f92672">[</span>i<span style="color:#f92672">]</span>
    tasks<span style="color:#f92672">[</span>param<span style="color:#f92672">]</span> <span style="color:#f92672">=</span> <span style="color:#f92672">{</span>
      param: <span style="color:#f92672">{</span>
        build job: <span style="color:#e6db74">&#34;Job_A&#34;</span><span style="color:#f92672">,</span> parameters: <span style="color:#f92672">[</span><span style="color:#66d9ef">new</span> StringParameterValue<span style="color:#f92672">(</span><span style="color:#e6db74">&#34;HOST&#34;</span><span style="color:#f92672">,</span> param<span style="color:#f92672">)]</span>
      <span style="color:#f92672">}</span>
    <span style="color:#f92672">}</span>
  <span style="color:#f92672">}</span>
  print<span style="color:#f92672">(</span>tasks<span style="color:#f92672">)</span>
  parallel tasks
<span style="color:#f92672">}</span>
</code></pre></div><h2 id="è§£æ±ºæ–¹æ³•">è§£æ±ºæ–¹æ³•</h2>
<p>ã“ã‚Œã®åŸå› ãŒå…¨ãã‚ã‹ã‚‰ãªãã¦ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ãŸæ‰€æ­£å¸¸ã«å‹•ãã‚ˆã†ã«ãªã£ãŸã€‚</p>
<h2 id="å‹•ä½œãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã«ã¤ã„ã¦">å‹•ä½œãƒãƒ¼ã‚¸ãƒ§ãƒ³æƒ…å ±ã«ã¤ã„ã¦</h2>
<p>ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã®éš›ã«å¯¾è±¡ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã ã‘ã§ãªãå…¨ã¦ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã‚’è¡Œã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p>
<p>ãã®ãŸã‚ä¸‹è¨˜ã«è¨˜è¼‰ã™ã‚‹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä»¥å¤–ã‚‚ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã—ã¡ã‚ƒã£ã¦ã¾ã™ã€‚ã€‚ã€‚</p>
<table>
<thead>
<tr>
<th>å¯¾è±¡</th>
<th>æ—§ãƒãƒ¼ã‚¸ãƒ§ãƒ³</th>
<th>æ–°ãƒãƒ¼ã‚¸ãƒ§ãƒ³</th>
</tr>
</thead>
<tbody>
<tr>
<td>Jenkins</td>
<td>v2.30</td>
<td>v2.132</td>
</tr>
<tr>
<td>Pipelineï¼ˆãƒ—ãƒ©ã‚°ã‚¤ãƒ³ï¼‰</td>
<td>2.5</td>
<td>2.6</td>
</tr>
</tbody>
</table>
<p>ï¼ˆJenkinsã®ãƒã‚¤ãƒŠãƒ¼ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒ100ãã‚‰ã„ä¸ŠãŒã£ã¦ã¾ã™ã­ğŸ’¦ï¼‰</p>
<h2 id="ã¾ã¨ã‚">ã¾ã¨ã‚</h2>
<p>çµæ§‹é•·ã„é–“ï¼ˆã¨ã„ã£ã¦ã‚‚åˆè¨ˆ3æ™‚é–“ãã‚‰ã„ï¼‰è‹¦ã—ã‚“ã§ãŸã®ã§è§£æ±ºã§ãã¦ã‚ˆã‹ã£ãŸã€‚
Jenkinsã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ã ã‘ã¯å‹•ã‹ãªããªã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ï¼ˆã¨å‹æ‰‹ã«ãã†æ€ã„è¾¼ã‚“ã§ãŸï¼‰ã®ã§ãªã‚‹ã¹ãã—ãŸããªã‹ã£ãŸã‘ã©è¡Œã£ã¦æ²»ã£ã¦ã‚ˆã‹ã£ãŸã€‚</p>
<p>æ¯æ—¥å®šæ™‚ã§AMIã‚’ã¾ã‚‹ã”ã¨ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’å–ã£ã¦ã‹ã‚‰ã‹ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚¢ãƒƒãƒ—ç­‰ã®ã‚ªãƒšãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã®æ•·å±…ãŒã‚ã‚‹ç¨‹åº¦ä½ãã€ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã¯å¤§äº‹ã ã¨å†èªè­˜ã—ãŸã€‚</p>
</div>

    
    
    

    
    

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-0695732937559315"
     crossorigin="anonymous"></script>

<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-0695732937559315"
     data-ad-slot="4045278298"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>

</main>

        <footer>
            <p class="copyright text-muted">Â© All rights reserved. Powered by <a href="https://gohugo.io">Hugo</a> and <a href="https://github.com/calintat/minimal">Minimal</a>.</p>

        </footer>

        

        
    </body>

</html>

